***WEB-SERVER with DNS***
 
 >>> RedHat httpd webserver...

 => nginx  ,,   httpd   ,,   apache2


 ---httpd rhel
ЁЯдаЁЯда 
@@@    software		=	httpd
       port	    	=	80,443
       document root	=	/var/www/html
       configuration	=	/etc/httpd/conf/httpd.conf
 							 ЁЯдаЁЯда


///practical

  $ yum install httpd -y
  $ systemctl enable --now httpd
  $ cd /var/www/html/                                   ## By default the data pick up from here
  $ vim index.html                                      >> this project for web-server

^^^ serarch =>  barphani.store   = this is domain name for running machine ip  = this project for web-server




///practical =>>   ЁЯда"Name Based Virtual hosting"ЁЯда 
                   EX: 
                        > barphnai.store
                        > photos.barphani.store
                        > docs.barphani.store
                        > drive.barphani.store

  $ vim /var/named/coco
    ||
    ||
    photos	IN	A	3.110.30.198
    docs	IN	A	3.110.30.198
    drive	IN	A	3.110.30.198
    
  $ systemctl restart named



  $ cd /var/www/                              # httpd by default also reads the data inside /var/www/ because it is written inside /etc/httpd/conf/httpd.conf
  $ mkdir photos docs drive 
  $ cd 
  $ wget 3_free_css template download and unzip file and cp unzip file and paste 3 directory =>> photos docs drive one by one


  
 ЁЯШ╢тАНЁЯМля╕ПЁЯШ╢тАНЁЯМля╕ПЁЯШ╢тАНЁЯМля╕П %%%%%%% virtual hosting for httpd DocumentRoot%%

code рд░рдЦрд╡рд╛рдиреЗ рдХреЗ рдмрд╛рдж domain-name search рдХрд░рдЧреЗ рддреЛ Same conntent рджреЗрдЦреЗрдЧрд╛ рдХреНрдпреЛрдХрд┐ рддреЛ by defaut /var/www/namlet рд╣реА code рд╣реВрдЯрд╛ рд░рд╣рд╛ рд╣реИ 

рд╣рдорд╛рд░реЗ system рдХреЛ рдХреНрдпрд╛ рдкрддрд╛ рдХреА рдЗрди-рдЗрди рдЬрдЧрд╣реЛ рд╣реЛ Duta code рд╣реБрдЯрд╛рдирд╛ рд╣реИ рддреЛ рдЙрд╕реЗ рдмрддрд╛рдирд╛ рдкрдбреЗрдЧрд╛ рддреЛ рд╣рдореЗ virtual hosting рдХрд░рдиреА рдкрдбрд╝реЗрдЧреА virtual host рдХреА entry рдХрд░рдиреА рдкрдбрд╝рдЧреА  >>>  etc/httpd/conf.d/ рдпрд╣рд╛ рдкрд░ рдмрдиреЗрдЧреА рдЖрдкрдХреА file EX: photos.conf , docs.conf , drive.conf рд╕рдмреЛ рдХреЗ рд▓рд┐рдП рдмрдирд╛рдиреА рдкрдбреЗрдЧреА рдФрд░ рдпрд╣рд╛ рдкрд░ code рдХрд╣рд╛рдВ рд╕реЗ рд╣реБрдЯрд╛рдирд╛ рд╣реИ рд╡реЛ entry рдХрд░рдиреА рдкреЬреЗрдЧреА рд╕рдмреЛ рдХреЗ рд▓рд┐рдП рдЕрд▓рдЧ-рдЕрд▓рдЧ file рдмрдиреЗрдЧреАред

ЁЯШНЁЯШНЁЯШН
  $ cd /etc/httpd/conf.d/                      
  $ vim barphnai.conf                              
         ||                                          
    <virtualhost	*:80>                                                      
    DocumentRoot	/var/www/html                                                                                        
    ServerName		barphani.store                             
    </virtualhost>                                  
                                 ЁЯШНЁЯШНЁЯШН  



ЁЯШНЁЯШНЁЯШН                            
  $ vim photos.conf
         ||                                                                            
    <virtualhost	*:80>                                            
    DocumentRoot	/var/www/                                                                               
    ServerName		photos.barphani.store                              
    </virtualhost>                                
                                 ЁЯШНЁЯШНЁЯШН



ЁЯШНЁЯШНЁЯШН                            
  $ vim docs.conf
         ||                                                                            
    <virtualhost	*:80>                                            
    DocumentRoot	/var/www/                                                                                  
    ServerName		docs.barphani.store                              
    </virtualhost>                                
                                 ЁЯШНЁЯШНЁЯШН



ЁЯШНЁЯШНЁЯШН                            
  $ vim drive.conf
         ||                                                                            
    <virtualhost	*:80>                                            
    DocumentRoot	/var/www/                                                                                  
    ServerName		drive.barphani.store                              
    </virtualhost>                                
                                 ЁЯШНЁЯШНЁЯШН




  $ systemctl restart httpd
  $ httpd -t                    =>> syntax ok
  
  
^^^ and search domain >>>> barphani.store ,,  photos.barphani.store ,, docs.barphani.store  ,,  drive.barphani.store  = running all domain



ЁЯПНя╕П@@@
  рдЕрдЧрд░ рдХрд╛рдо /var/www рдореЗрдВ рдХрд░рддреЗ рд╣реИ рддрдм рддреЛ apache user рд╕рд╛рд░рд╛ рдХрд╛рдо рдХрд░рдиреЗ рджреЗрдЧрд╛ but  рдмрд╛рд╣рд░ рдХрд╛рдо рдирд╣реАрдВ рдХрд░рдиреЗ рджреЗрдЧрд╛ рддреЛ рдпреЗ рд╕рд╛рд░реА рдЪреАрдЬреЗ рдХрд╣рд╛ рд▓рд┐рдЦреА рдЧрдпреА рд╣реИ рдХрд╣рд╛ рд▓рд┐рдЦрд╛ рдЧрдпрд╛ рд╣реИ рдХреА /var/www/html рд╣реА Doument_root рд░рд╣реЗрдЧрд╛, index.html file рд╣реА Read рд╣реЛрдЧреА virtual hosting рдХреА рд╕рд╛рд░реА entry рдХрд░рдиреА рдкрдбреЗрдЧреА рддреЛ рдпреЗ рд╕рдм httpd рдХреА рдЬреЛ configration file рд╣реИ рдЙрдзрд░ рдпреЗ рд╕рдм рд▓рд┐рдЦрд╛ рд╣реБрдЖ рд╣реИ  

# cd /etc/http/conf/

///practical diffrent directory like = /coco


 $ mkdir /coco       
 $ wget css_template          and          $ unzip css_template  
 $ cp -rvf css_template/* /coco
 $ cd /etc/httpd/conf.d/
 $ vim coco.conf
         ||
    <virtualhost	*:80>                                            
    DocumentRoot	/coco                                                                                  
    ServerName		coco.barphani.store                              
    </virtualhost>

    
    <Directory	"/coco">
    <RequireAll>
    	   Require all granted
    </RequireAll>
    </Directory>                                
                  
 
 $ systemctl restart httpd            ^^^search domain name [coco.barphani.store]    

   !!! But why are we still getting the error?
Because selinux is stopping us, this is a special policy.
It is the security of special enterprises.



ЁЯдаЁЯдаЁЯдаЁЯдаЁЯдаЁЯда
 @@@  SElinux  =>> 

 рдЬреИрд╕реЗ рдХреА рдЖрдк рдХрд╛ user рдХрд┐рд╕ object рдХреЛ Read рдХрд░ рд╕рдХрддрд╛ рд╣реИ рд╡реЛ рд╕рд╛рд░реА permission рдпреЗ selinux d├йside рдХрд░рддрд╛ рд╣реИ | 

> рдХреЛрдИ рдирдпрд╛ user create рд╣реБрдЖ рддреЛ рдЙрд╕реЗ рдХреНрдпрд╛ permission рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдП рдпреЗ рд╕рдм Selinux рджреЗрдЦрддрд╛ рд╣реИред

рдЬреИрд╕реЗ httpd рдХреА service, apache user рд╣реА рдХреНрдпреЛ Read рдХрд░реЗрдЧрд╛ ? рдпреЗ рд╕рдм рд▓рд┐рдЦрд╛ рд╣реБрдЖ рд╣реИ selinux рдХреА Policy рдХреЗ рдЕрдВрджрд░, рдмрд╣реБрдд strong police рд╣реИ рдХреЛрдИ рднреА 50% рд╕реЗ рдЬреНрдпрд╛рджрд╛ use рдирд╣реАрдВ рдХрд░ рдкрд╛рдпрд╛ рд╣реИред

--- Selinux рдиреЗ рдпреЗ рдмреЛрд▓ рд░рдЦрд╛ рд╣реИ рдХрд┐ рдЬреЛ httpd рдХрд╛ user рд╣реИ apache рдЗрд╕рдХреА рдЬреЛ document root рд╣реИ рдпрд╛ рдЗрд╕рдХреА рдЬреЛ configration file рд╣реИ рдпрд╛ рдлрд┐рд░ apache рдХреЗ related   рдпрд╛ httpd рдХреЗ Related рдЬрд┐рддрдиреА рднреА file рдЖрдкрдХреЗ system рдкрд░ ред рдЙрдирдХреЗ рдКрдкрд░ рдереЗ рд╡рд╛рд▓рд╛ tag рд▓рдЧрд╛ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП = httpd-SYS-content-t

* рдЬрдм рднреА рдЖрдк рдЕрдкрдиреЗ system рдкрд░ normal file рдпрд╛ directory рдмрдирд╛рддреЗ рд╣реЛ рддреЛ рдЙрд╕рдХреЗ рдКрдкрд░ (default_t) file contxt рдорд┐рд▓рддрд╛ рд╣реИред and рдпреЗ file contat рдХреЗ рдЕрдВрджрд░ рдмрд╣реБрдд рд╕рд╛рд░реА permissions рд╣реЛрддреА рд╣реИ  and рд╡реЛ permission selinux deside рдХрд░рддрд╛ рд╣реИ 

default file_dir   =>    default_t         (permissions)  <-  selinux

apache  = httpd_sys_content_t

* рдЖрдкрдХреЗ apache user рдХреЛ рдереЛрдбреА рдкрддрд╛ рд╣реИ рдХреА рдХрд╣рд╛ рдкрд░ рдХреЛрдирд╕реА file рд░рдЦреА рд╣реБрдИ рд╣реИ рдЙрд╕рдХреЛ рдХреИрд╕реЗ рдкрддрд╛ рдХреА рдЖрдкрдиреЗ Slash(/) рдХреЗ рдЕрдВрджрд░ coco (/coco) рдмрдирд╛ рджреА | рддреЛ apache рдХрд╣рд╛ Read рдХрд░рдиреЗ рдЬрд╛рдпреЗрдЧрд╛ рдЗрд╕рдХреЛред  рдЙрд╕рдХреЛ рддреЛ рдирд╣реАрдВ рдкрддрд╛ рдирд╛) рддреЛ selinux рднреА рдЗрд╕реЗ рд░реЛрдХрддреА рд╣реИ рдЗрд╕рдХреЛ read рдХрд░рдиреЗ рдирд╣реА рджреЗрддреА apache рдХреЛ рдХреНрдпреЛрдХрд┐ only рдЖрдкрдХрд╛ (default_t) context рдмрдирд╛ рджреЗрддрд╛ рд╣реИ 
рдФрд░ apache only (httpd_sys_content_t) context file рдХреЛ read рдХрд░рдиреЗ рджреЗрддреА рд╣реИ selinux
                                                                          ЁЯдаЁЯдаЁЯдаЁЯдаЁЯдаЁЯда



 $ ls -ldZ /coco             = (default_t)                ..L = list all permission ,,,, -d = directory  ,,,   Z = file context
 $ ls -ldZ /var/www          = httpd_sys_context_t

 $ setenforce 0          = selinux policy off 
 $ getenforce            = permissive                     = check
 

 ^^^ search domain names see this is run web

 $ setenforce 1          = selinux policy on
 $ getenforce            = enforcing
 

 @ change file context @

 $ semanage fcontext -a -t httpd_sys_content_t /coco/(/.*)?
 $ restorecon -RvvF /coco(/.*)?
 $ ls -ldZ /coco                           >> file context change (httpd_sys_content_t)
 

 ^^^search domain name = all domain read all web-host
                                                    ЁЯШНЁЯШНЁЯШНЁЯШНЁЯШНЁЯШНЁЯШНЁЯШН








тЭдя╕ПтЭдя╕ПтЭдя╕ПтЭдя╕ПтЭдя╕ПтЭдя╕ПтЭдя╕П

 ***SECURE-WEB-SITE***

 1. USER Based authentication on website
 2. HTTPS secure [443]

 
 
 *1. User Based Authentication
  

  $ cd /var/www/html
  $ mkdir secure
  $ cd secure
  $ vim index.html               =>> <h1>this is my secure page</h1>

secure   $ vim .htaccess         =>> hiden file create

               ||
           AuthType Basic
           AuthName "password protected"
           AuthUserFile "/etc/httpd/htpasswd"
           Require valid-user

  @ htpasswd command =>>
 
  $ yum install -y httpd-utils     = package name
  
  $ cd /etc/httpd     =>>   Here you need to create the htpasswd file

  $ htpasswd -c htpasswd vikas          =>> c = first time create file
  $ cat htpasswd
  $ htpasswd htpasswd mohit             =>> password
  $ cd /etc/httpd/conf.d
  $ vim coco.conf

          ||
    <virtualhost	*:80>                                            
    DocumentRoot	/var/www/html/                                                                                  
    ServerName		coco.barphani.store                              
    </virtualhost>

    
    <Directory	"/var/www/html/secure">
           allowoverride	authconfig
    </Directory>
   
  $ systemctl restart httpd
  
 ^^^ search domain =>> coco.barphani.store/secure  = user id and password then show this web-page 
                                                                                            тЭдя╕ПтЭдя╕ПтЭдя╕ПтЭдя╕ПтЭдя╕ПтЭдя╕ПтЭдя╕ПтЭдя╕П







*2. HTTPS secure installation >>>  " hyper text transfer protocal secure "   =   web-data text encrypt
 
 ЁЯЪЩЁЯЪЩ CA = " certification authority "   = work =  " lets encrypt organisation "  1. CSR cretificate
                                                                                   2. Private key

  @ Need 3 software

  1. mod_ssl    2. certbot   3. python3-cretbot-apache -y


 @@ this all software install so Need  EPEL repository 

  ### Attach EBS volume from AWS 5GB

  $ lsblk
  $ mkswap /dev/xvdf        =>> UUID copy
  $ vim /etc/fstab          =>> UUID paste	none	swap	defaults	0	0
  $ mount -a
  $ lsblk
  $ swapon /dev/xvdf
  $ lsblk
  $ free -h


^^^ search =>>  epel repository for rhel 9 by blog  

  $ dns install  -----

  $ yum repolist

 
ЁЯШКЁЯШКЁЯШК

  $ yum install -y mod_ssl cretbot python3-cretbot-apache 
  $ systemctl restart httpd

  $ cretbot --apache


^^^ search httpd://coco.barphani.store   
                                    ЁЯШКЁЯШКЁЯШК












 
 







  
                 
   
   





  

  

 
  




 






















 










  
 
 
  

 

  
  



       